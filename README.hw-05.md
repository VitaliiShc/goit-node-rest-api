# –î–æ–º–∞—à–Ω—î –∑–∞–≤–¥–∞–Ω–Ω—è 5

(–∞–¥—Ä–µ—Å–∞ –≥—ñ–ª–∫–∏ https://github.com/VitaliiShc/goit-node-rest-api/tree/hw05-avatars)

## ‚úÖ –ö—Ä–æ–∫ before begin

‚úÖ –°—Ç–≤–æ—Ä–∏ –≥—ñ–ª–∫—É hw05-avatars –∑ –≥—ñ–ª–∫–∏ master.
‚úÖ –ü—Ä–æ–¥–æ–≤–∂ —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è REST API –¥–ª—è —Ä–æ–±–æ—Ç–∏ –∑ –∫–æ–ª–µ–∫—Ü—ñ—î—é –∫–æ–Ω—Ç–∞–∫—Ç—ñ–≤.
‚úÖ –î–æ–¥–∞–π –º–æ–∂–ª–∏–≤—ñ—Å—Ç—å –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è –∞–≤–∞—Ç–∞—Ä–∫–∏ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞ —á–µ—Ä–µ–∑ [Multer] (https://github.com/expressjs/multer).

## ‚úÖ –ö—Ä–æ–∫ 1

‚úÖ - –°—Ç–≤–æ—Ä–∏ –ø–∞–ø–∫—É public –¥–ª—è —Ä–æ–∑–¥–∞—á—ñ —Å—Ç–∞—Ç–∏–∫–∏. –£ —Ü—ñ–π –ø–∞–ø—Ü—ñ –∑—Ä–æ–±–∏ –ø–∞–ø–∫—É avatars.
‚úÖ - –ù–∞–ª–∞—à—Ç—É–π Express –Ω–∞ —Ä–æ–∑–¥–∞—á—É —Å—Ç–∞—Ç–∏—á–Ω–∏—Ö —Ñ–∞–π–ª—ñ–≤ –∑ –ø–∞–ø–∫–∏ public.
‚úÖ - –ü–æ–∫–ª–∞–¥–∏ –±—É–¥—å-—è–∫–µ –∑–æ–±—Ä–∞–∂–µ–Ω–Ω—è –≤ –ø–∞–ø–∫—É public/avatars —ñ –ø–µ—Ä–µ–≤—ñ—Ä, —â–æ —Ä–æ–∑–¥–∞—á–∞ —Å—Ç–∞—Ç–∏–∫–∏ –ø—Ä–∞—Ü—é—î.
‚úÖ - –ü—Ä–∏ –ø–µ—Ä–µ—Ö–æ–¥—ñ –ø–æ —Ç–∞–∫–æ–º—É URL –±—Ä–∞—É–∑–µ—Ä –≤—ñ–¥–æ–±—Ä–∞–∑–∏—Ç—å –∑–æ–±—Ä–∞–∂–µ–Ω–Ω—è.
Shell http://locahost:<–ø–æ—Ä—Ç>/avatars/<—ñ–º'—è —Ñ–∞–π–ª—É –∑ —Ä–æ–∑—à–∏—Ä–µ–Ω–Ω—è–º>

## ‚úÖ –ö—Ä–æ–∫ 2

‚úÖ –£ —Å—Ö–µ–º—É –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞ –¥–æ–¥–∞–π –Ω–æ–≤—É –≤–ª–∞—Å—Ç–∏–≤—ñ—Å—Ç—å avatarURL –¥–ª—è –∑–±–µ—Ä—ñ–≥–∞–Ω–Ω—è –∑–æ–±—Ä–∞–∂–µ–Ω–Ω—è.

```js
{
  ...
  avatarURL: String,
  ...
}
```

‚úÖ –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–π –ø–∞–∫–µ—Ç [gravatar] (https://www.npmjs.com/package/gravatar) –¥–ª—è —Ç–æ–≥–æ, —â–æ–± –ø—Ä–∏ —Ä–µ—î—Å—Ç—Ä–∞—Ü—ñ—ó –Ω–æ–≤–æ–≥–æ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞ –≤—ñ–¥—Ä–∞–∑—É –∑–≥–µ–Ω–µ—Ä—É–≤–∞—Ç–∏ –π–æ–º—É –∞–≤–∞—Ç–∞—Ä –ø–æ –π–æ–≥–æ email.

## ‚úÖ –ö—Ä–æ–∫ 3

–ü—Ä–∏ —Ä–µ—î—Å—Ç—Ä–∞—Ü—ñ—ó –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞:
‚úÖ ‚Ä¢ –°—Ç–≤–æ—Ä—é–π –ø–æ—Å–∏–ª–∞–Ω–Ω—è –Ω–∞ –∞–≤–∞—Ç–∞—Ä–∫—É –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞ –∑–∞ –¥–æ–ø–æ–º–æ–≥–æ—é gravatar
‚úÖ ‚Ä¢ –û—Ç—Ä–∏–º–∞–Ω–∏–π URL –∑–±–µ—Ä–µ–∂–∏ –≤ –ø–æ–ª–µ avatarURL –ø—ñ–¥ —á–∞—Å —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞

## ‚úÖ –ö—Ä–æ–∫ 4

‚úÖ –î–æ–¥–∞–π –º–æ–∂–ª–∏–≤—ñ—Å—Ç—å –ø–æ–Ω–æ–≤–ª–µ–Ω–Ω—è –∞–≤–∞—Ç–∞—Ä–∫–∏, —Å—Ç–≤–æ—Ä–∏–≤—à–∏ –µ–Ω–¥–ø–æ—ñ–Ω—Ç /users/avatars —ñ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—é—á–∏ –º–µ—Ç–æ–¥ PATCH.

```js 
// –ó–∞–ø–∏—Ç
PATCH /users/avatars
Content-Type: multipart/form-data
Authorization: "Bearer {{token}}"
RequestBody: –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–∏–π —Ñ–∞–π–ª

// –£—Å–ø—ñ—à–Ω–∞ –≤—ñ–¥–ø–æ–≤—ñ–¥—å
Status: 200 OK
Content-Type: application/json
ResponseBody: {
  "avatarURL": "—Ç—É—Ç –±—É–¥–µ –ø–æ—Å–∏–ª–∞–Ω–Ω—è –Ω–∞ –∑–æ–±—Ä–∞–∂–µ–Ω–Ω—è"
}

// –ù–µ—É—Å–ø—ñ—à–Ω–∞ –≤—ñ–¥–ø–æ–≤—ñ–¥—å
Status: 401 Unauthorized
Content-Type: application/json
ResponseBody: {
  "message": "Not authorized"
}
```

‚úÖ ‚Ä¢ –°—Ç–≤–æ—Ä–∏ –ø–∞–ø–∫—É tmp –≤ –∫–æ—Ä–µ–Ω—ñ –ø—Ä–æ–µ–∫—Ç—É —ñ –∑–±–µ—Ä—ñ–≥–∞–π –≤ –Ω–µ—ó –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω—É –∞–≤–∞—Ç–∞—Ä–∫—É.
‚úÖ ‚Ä¢ –û–±—Ä–æ–±–∏ –∞–≤–∞—Ç–∞—Ä–∫—É –ø–∞–∫–µ—Ç–æ–º [jimp] (https://www.npmjs.com/package/jimp) —ñ –ø–æ—Å—Ç–∞–≤ –¥–ª—è –Ω–µ—ó —Ä–æ–∑–º—ñ—Ä–∏ 250 –Ω–∞ 250
‚úÖ ‚Ä¢ –ü–µ—Ä–µ–Ω–µ—Å–∏ –∞–≤–∞—Ç–∞—Ä–∫—É –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞ –∑ –ø–∞–ø–∫–∏ tmp –≤ –ø–∞–ø–∫—É public/avatars —ñ –¥–∞–π —ó–π —É–Ω—ñ–∫–∞–ª—å–Ω–µ —ñ–º'—è –¥–ª—è –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞.
‚úÖ ‚Ä¢ –û—Ç—Ä–∏–º–∞–Ω–∏–π URL /avatars/<—ñ–º'—è —Ñ–∞–π–ª—É –∑ —Ä–æ–∑—à–∏—Ä–µ–Ω–Ω—è–º> —Ç–∞ –∑–±–µ—Ä–µ–∂–∏ –≤ –ø–æ–ª–µ avatarURL –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞

## üîª –î–æ–¥–∞—Ç–∫–æ–≤–µ –∑–∞–≤–¥–∞–Ω–Ω—è - –Ω–µ–æ–±–æ–≤'—è–∑–∫–æ–≤–µ

–ù–∞–ø–∏—Å–∞—Ç–∏ unit-—Ç–µ—Å—Ç–∏ –¥–ª—è –∫–æ–Ω—Ç—Ä–æ–ª–µ—Ä–∞ –≤—Ö–æ–¥—É (–ª–æ–≥—ñ–Ω)
–ó–∞ –¥–æ–ø–æ–º–æ–≥–æ—é [Jest] (https://jestjs.io/ru/docs/getting-started)
‚Ä¢ –≤—ñ–¥–ø–æ–≤—ñ–¥—å –ø–æ–≤–∏–Ω–∞ –º–∞—Ç–∏ —Å—Ç–∞—Ç—É—Å-–∫–æ–¥ 200
‚Ä¢ —É –≤—ñ–¥–ø–æ–≤—ñ–¥—ñ –ø–æ–≤–∏–Ω–µ–Ω –ø–æ–≤–µ—Ä—Ç–∞—Ç–∏—Å—è —Ç–æ–∫–µ–Ω
‚Ä¢ —É –≤—ñ–¥–ø–æ–≤—ñ–¥—ñ –ø–æ–≤–∏–Ω–µ–Ω –ø–æ–≤–µ—Ä—Ç–∞—Ç–∏—Å—è –æ–±'—î–∫—Ç user –∑ 2 –ø–æ–ª—è–º–∏ email –∏ subscription –∑ —Ç–∏–ø–æ–º –¥–∞–Ω–∏—Ö String
